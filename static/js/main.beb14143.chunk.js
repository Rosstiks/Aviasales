(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{18:function(t,e,n){t.exports={container:"results-sort_container__2c3ja",item:"results-sort_item__1oJUM",active:"results-sort_active__2qUpf"}},23:function(t,e,n){t.exports={container:"filter-item_container__2FQyE",filterItem:"filter-item_filterItem__2dHbE",contentContainer:"filter-item_contentContainer__3TAHc",checkInput:"filter-item_checkInput__2IDI1",checkBox:"filter-item_checkBox__1-iE1"}},24:function(t,e,n){t.exports={container:"alert_container__3hzHu",text:"alert_text__oosjX",icon:"alert_icon__onmLE"}},27:function(t,e,n){t.exports={list:"results-list_list__3_SbO",alertContainer:"results-list_alertContainer__1WhGg",spinnerContainer:"results-list_spinnerContainer__3IHJ6",buttonMore:"results-list_buttonMore__2P63V"}},32:function(t,e,n){t.exports={filterContainer:"filter_filterContainer__1hksp",filterTitle:"filter_filterTitle__2qJ0w",filterList:"filter_filterList__9tqaK"}},33:function(t,e,n){t.exports={container:"app_container__190db",logoContainer:"app_logoContainer__215p8",logo:"app_logo__1sv3J"}},8:function(t,e,n){t.exports={container:"results-item_container__EVNe5",header:"results-item_header__1S4wN",price:"results-item_price__Tq8-j",descriptionRow:"results-item_descriptionRow__TYKje",descriptionColumn:"results-item_descriptionColumn__3fa8d",titleInfo:"results-item_titleInfo__346SW",info:"results-item_info__hPqaM"}},81:function(t,e,n){},82:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(21),a=n.n(s),r=n(11),i=n(10),o=n(45),l=n(46),u=n(40),j=n(29),b=n(7);var d=Object(i.combineReducers)({filter:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ALL:!0,"0_TRANS":!0,"1_TRANS":!0,"2_TRANS":!0,"3_TRANS":!0},n=arguments.length>1?arguments[1]:void 0,c=Object(b.a)({},e);switch(n.type){case"CHANGE_FILTER":return c=Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n.change,!e[n.change])),t=Object.values(c).slice(1).includes(!1),Object(b.a)(Object(b.a)({},c),{},{ALL:!t});case"CHANGE_FILTER_ALL":for(var s in c)c[s]=!e.ALL;return c;default:return e}},sort:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CHEAP",e=arguments.length>1?arguments[1]:void 0;return"CHANGE_SORT"===e.type?e.change:t},tickets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,loadComplete:!1,items:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_TICKETS":return Object(b.a)(Object(b.a)({},t),{},{items:[].concat(Object(u.a)(t.items),Object(u.a)(e.data.tickets)),loadComplete:e.data.stop,isLoading:!1});case"REQUEST_TICKETS":return Object(b.a)(Object(b.a)({},t),{},{isLoading:!0});default:return t}},searchID:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return"SET_SEARCH_ID"===e.type?e.id:t}}),h=d,f=Object(i.createStore)(h,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(l.a))),m=n(87),_=n(89),p=n(26),O=n.n(p),g=n(35),x=n(47),v=n(88),N=function t(){Object(x.a)(this,t),this.getSearchId=Object(g.a)(O.a.mark((function t(){var e,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n.searchId);case 7:case"end":return t.stop()}}),t)}))),this.getTicketsPack=function(){var t=Object(g.a)(O.a.mark((function t(e){var n,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return(c=t.sent).tickets.forEach((function(t){return t.id=Object(v.a)()})),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=new N,T=function(t){return{type:"CHANGE_FILTER",change:t}},A=function(){return{type:"CHANGE_FILTER_ALL"}},I=function(t){return{type:"CHANGE_SORT",change:t}},E=function(t){return{type:"RECEIVE_TICKETS",data:t}},S=function(){return function(t){return C.getSearchId().then((function(e){return t(function(t){return{type:"SET_SEARCH_ID",id:t}}(e))}))}},k=function(t){return function(e){return e({type:"REQUEST_TICKETS"}),C.getTicketsPack(t).then((function(t){return e(E(t))})).catch((function(){return e(E({tickets:[],stop:!1}))}))}},L=n(23),R=n.n(L),y=n(1);var H=Object(r.b)((function(t){return{filter:t.filter}}),(function(t){return Object(i.bindActionCreators)({changeFilterAll:A,changeFilter:T},t)}))((function(t){var e=t.name,n=t.filter,c=t.changeFilter,s=t.changeFilterAll;return Object(y.jsx)("li",{className:R.a.container,children:Object(y.jsx)("label",{className:R.a.filterItem,children:Object(y.jsxs)("div",{className:R.a.contentContainer,children:[Object(y.jsx)("input",{name:e,onChange:function(){"ALL"===e?s():c(e)},className:R.a.checkInput,type:"checkbox",checked:n[e]}),Object(y.jsx)("span",{className:R.a.checkBox}),{ALL:"\u0412\u0441\u0435","0_TRANS":"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1_TRANS":"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2_TRANS":"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3_TRANS":"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}[e]]})})})})),w=n(32),M=n.n(w);var F=function(){return Object(y.jsxs)("div",{className:M.a.filterContainer,children:[Object(y.jsx)("span",{className:M.a.filterTitle,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(y.jsxs)("ul",{className:M.a.filterList,children:[Object(y.jsx)(H,{name:"ALL"}),Object(y.jsx)(H,{name:"0_TRANS"}),Object(y.jsx)(H,{name:"1_TRANS"}),Object(y.jsx)(H,{name:"2_TRANS"}),Object(y.jsx)(H,{name:"3_TRANS"})]})]})},D=n(31),P=n(48),G=n.n(P),J=n(24),K=n.n(J),q=n.p+"static/media/ok.801c8264.png";var B=Object(r.b)((function(t){return{loadComplete:t.tickets.loadComplete}}))((function(t){var e=t.loadComplete,n=Object(c.useState)(!1),s=Object(D.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){e&&(setTimeout((function(){document.getElementById("alert").style.height=0}),3500),setTimeout((function(){return r(!0)}),4e3))}),[e,r]),a?null:e?Object(y.jsxs)("div",{className:K.a.container,id:"alert",children:[Object(y.jsx)("img",{className:K.a.icon,src:q,alt:"icon"}),Object(y.jsx)("div",{className:K.a.text,children:"\u0412\u0441\u0435 \u0431\u0438\u043b\u0435\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b!"})]}):Object(y.jsxs)("div",{className:K.a.container,children:[Object(y.jsx)(G.a,{color:"#2196f3",size:36}),Object(y.jsx)("div",{className:K.a.text,children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0431\u0438\u043b\u0435\u0442\u0430\u043c"})]})})),U=B,V=n(18),z=n.n(V);var Q=Object(r.b)((function(t){return{sort:t.sort}}),(function(t){return Object(i.bindActionCreators)({changeSort:I},t)}))((function(t){var e=t.sort,n=t.changeSort;return Object(y.jsxs)("div",{className:z.a.container,children:[Object(y.jsx)("button",{className:"".concat(z.a.item," ").concat("CHEAP"===e?z.a.active:null),onClick:function(){return n("CHEAP")},type:"button",children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439"}),Object(y.jsx)("button",{className:"".concat(z.a.item," ").concat("FAST"===e?z.a.active:null),onClick:function(){return n("FAST")},type:"button",children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}),Object(y.jsx)("button",{className:"".concat(z.a.item," ").concat("OPTIMAL"===e?z.a.active:null),onClick:function(){return n("OPTIMAL")},type:"button",children:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439"})]})})),W=n(85),X=n(49),Y=n.n(X),Z=n(8),$=n.n(Z),tt=n(39);var et=function(t){var e=t.origin,n=t.destination,c=t.date,s=t.stops,a=t.duration,r=a/60>=24?"".concat(Math.floor(a/1440),"\u0434 ").concat(Math.floor(a/60)%24,"\u0447 ").concat(a%60,"\u043c"):"".concat(Math.floor(a/60),"\u0447 ").concat(a%60,"\u043c"),i=new Date(c),o=Object(tt.a)(i,"HH:mm"),l=Object(tt.a)(i.setMinutes(i.getMinutes()+a),"HH:mm"),u="".concat(s.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a");return 1===s.length&&(u="".concat(s.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),2!==s.length&&3!==s.length||(u="".concat(s.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),Object(y.jsxs)("div",{className:$.a.descriptionRow,children:[Object(y.jsxs)("div",{className:$.a.descriptionColumn,children:[Object(y.jsxs)("span",{className:$.a.titleInfo,children:[e," \u2013 ",n]}),Object(y.jsxs)("span",{className:$.a.info,children:[o," \u2013 ",l]})]}),Object(y.jsxs)("div",{className:$.a.descriptionColumn,children:[Object(y.jsx)("span",{className:$.a.titleInfo,children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(y.jsx)("span",{className:$.a.info,children:r})]}),Object(y.jsxs)("div",{className:$.a.descriptionColumn,children:[Object(y.jsx)("span",{className:$.a.titleInfo,children:u}),Object(y.jsx)("span",{className:$.a.info,children:s.join(", ")})]})]})};var nt=function(t){var e=t.price,n=t.carrier,c=t.segments,s="https://pics.avs.io/99/36/".concat(n,".png");return Object(y.jsxs)("li",{className:$.a.container,tabIndex:"0",children:[Object(y.jsxs)("header",{className:$.a.header,children:[Object(y.jsxs)("span",{className:$.a.price,children:[e," P"]}),Object(y.jsx)("img",{src:s,alt:"aircraft logo"})]}),Object(y.jsx)(et,Object(b.a)({},c[0])),Object(y.jsx)(et,Object(b.a)({},c[1]))]})},ct=n(27),st=n.n(ct);var at=Object(r.b)((function(t){return{tickets:t.tickets.items,filter:t.filter,sort:t.sort}}))((function(t){var e=t.tickets,n=t.filter,s=t.sort,a=Object(c.useState)(5),r=Object(D.a)(a,2),i=r[0],o=r[1],l=e.filter((function(t){if(n.ALL)return!0;var e=t.segments[0].stops.length,c=t.segments[1].stops.length;return Object.keys(n).some((function(t){return n[t]&&(e===+t[0]||c===+t[0])}))}));l.sort((function(t,e){var n=t.segments[0].duration+t.segments[1].duration,c=e.segments[0].duration+e.segments[1].duration,a=t.segments[0].stops.length+t.segments[1].stops.length,r=e.segments[0].stops.length+e.segments[1].stops.length;return"FAST"===s?n-c:"OPTIMAL"===s?a-r:t.price-e.price}));var u=l.slice(0,i).map((function(t){return Object(y.jsx)(nt,Object(b.a)({},t),t.id)}));if(!e.length)return Object(y.jsx)("div",{className:st.a.spinnerContainer,children:Object(y.jsx)(Y.a,{color:"#2196f3",size:30})});if(!u.length)return Object(y.jsx)("div",{className:st.a.alertContainer,children:Object(y.jsx)(W.a,{message:"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",type:"info",showIcon:!0})});var j=Object(y.jsx)("button",{className:st.a.buttonMore,onClick:function(){return o((function(t){return t+5}))},type:"button",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"}),d=u.length<l.length&&l.length?j:null;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("ul",{className:st.a.list,children:u}),d]})})),rt=at,it=n.p+"static/media/Logo.ba7ff9c5.svg",ot=n(33),lt=n.n(ot);var ut=Object(r.b)((function(t){return{searchID:t.searchID,isLoading:t.tickets.isLoading,loadComplete:t.tickets.loadComplete}}),(function(t){return Object(i.bindActionCreators)({getSearchID:S,getTickets:k},t)}))((function(t){var e=t.searchID,n=t.isLoading,s=t.loadComplete,a=t.getSearchID,r=t.getTickets;return Object(c.useEffect)(a,[a]),!e||n||s||r(e),Object(y.jsxs)("div",{className:lt.a.container,children:[Object(y.jsx)(U,{}),Object(y.jsx)("div",{className:lt.a.logoContainer,children:Object(y.jsx)("img",{src:it,alt:"logo",className:lt.a.logo})}),Object(y.jsxs)(m.a,{gutter:{xs:0,md:24},children:[Object(y.jsx)(_.a,{xs:{span:24},md:{span:8},children:Object(y.jsx)(F,{})}),Object(y.jsxs)(_.a,{xs:{span:24},md:{span:16},children:[Object(y.jsx)(Q,{}),Object(y.jsx)(rt,{})]})]})]})})),jt=ut;n(80),n(81);a.a.render(Object(y.jsx)(r.a,{store:f,children:Object(y.jsx)(jt,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.beb14143.chunk.js.map
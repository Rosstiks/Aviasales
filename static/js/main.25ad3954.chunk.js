(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{18:function(t,e,n){t.exports={container:"results-sort_container__2c3ja",item:"results-sort_item__1oJUM",active:"results-sort_active__2qUpf"}},23:function(t,e,n){t.exports={container:"filter-item_container__2FQyE",filterItem:"filter-item_filterItem__2dHbE",contentContainer:"filter-item_contentContainer__3TAHc",checkInput:"filter-item_checkInput__2IDI1",checkBox:"filter-item_checkBox__1-iE1"}},24:function(t,e,n){t.exports={container:"alert_container__3hzHu",text:"alert_text__oosjX",icon:"alert_icon__onmLE"}},27:function(t,e,n){t.exports={list:"results-list_list__3_SbO",alertContainer:"results-list_alertContainer__1WhGg",spinnerContainer:"results-list_spinnerContainer__3IHJ6",buttonMore:"results-list_buttonMore__2P63V"}},32:function(t,e,n){t.exports={filterContainer:"filter_filterContainer__1hksp",filterTitle:"filter_filterTitle__2qJ0w",filterList:"filter_filterList__9tqaK"}},33:function(t,e,n){t.exports={container:"app_container__190db",logoContainer:"app_logoContainer__215p8",logo:"app_logo__1sv3J"}},8:function(t,e,n){t.exports={container:"results-item_container__EVNe5",header:"results-item_header__1S4wN",price:"results-item_price__Tq8-j",descriptionRow:"results-item_descriptionRow__TYKje",descriptionColumn:"results-item_descriptionColumn__3fa8d",titleInfo:"results-item_titleInfo__346SW",info:"results-item_info__hPqaM"}},81:function(t,e,n){},82:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(21),s=n.n(a),r=n(10),i=n(11),o=n(59),l=n(45),u=n(40),j=n(29),b=n(7);var d=Object(r.combineReducers)({filter:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ALL:!0,"0_TRANS":!0,"1_TRANS":!0,"2_TRANS":!0,"3_TRANS":!0},n=arguments.length>1?arguments[1]:void 0,c=Object(b.a)({},e);switch(n.type){case"CHANGE_FILTER":return c=Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n.change,!e[n.change])),t=Object.values(c).slice(1).includes(!1),Object(b.a)(Object(b.a)({},c),{},{ALL:!t});case"CHANGE_FILTER_ALL":for(var a in c)c[a]=!e.ALL;return c;default:return e}},sort:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CHEAP",e=arguments.length>1?arguments[1]:void 0;return"CHANGE_SORT"===e.type?e.change:t},tickets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,loadComplete:!1,items:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_TICKETS":return Object(b.a)(Object(b.a)({},t),{},{items:[].concat(Object(u.a)(t.items),Object(u.a)(e.data.tickets)),loadComplete:e.data.stop,isLoading:!1});case"REQUEST_TICKETS":return Object(b.a)(Object(b.a)({},t),{},{isLoading:!0});default:return t}},searchID:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return"SET_SEARCH_ID"===e.type?e.id:t}}),h=d,f=n(87),m=n(89),_=n(26),p=n.n(_),O=n(35),g=n(46),x=n(88),v=function t(){Object(g.a)(this,t),this.getSearchId=Object(O.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n.searchId);case 7:case"end":return t.stop()}}),t)}))),this.getTicketsPack=function(){var t=Object(O.a)(p.a.mark((function t(e){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return(c=t.sent).tickets.forEach((function(t){return t.id=Object(x.a)()})),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=new v,C=function(t){return{type:"CHANGE_FILTER",change:t}},T=function(){return{type:"CHANGE_FILTER_ALL"}},A=function(t){return{type:"CHANGE_SORT",change:t}},I=function(t){return{type:"RECEIVE_TICKETS",data:t}},S=function(){return function(t){return N.getSearchId().then((function(e){return t(function(t){return{type:"SET_SEARCH_ID",id:t}}(e))}))}},E=function(t){return function(e){return e({type:"REQUEST_TICKETS"}),N.getTicketsPack(t).then((function(t){return e(I(t))})).catch((function(){return e(I({tickets:[],stop:!1}))}))}},L=n(23),k=n.n(L),R=n(1);var y=Object(i.b)((function(t){return{filter:t.filter}}),(function(t){return Object(r.bindActionCreators)({changeFilterAll:T,changeFilter:C},t)}))((function(t){var e=t.name,n=t.filter,c=t.changeFilter,a=t.changeFilterAll;return Object(R.jsx)("li",{className:k.a.container,children:Object(R.jsx)("label",{className:k.a.filterItem,children:Object(R.jsxs)("div",{className:k.a.contentContainer,children:[Object(R.jsx)("input",{name:e,onChange:function(){"ALL"===e?a():c(e)},className:k.a.checkInput,type:"checkbox",checked:n[e]}),Object(R.jsx)("span",{className:k.a.checkBox}),{ALL:"\u0412\u0441\u0435","0_TRANS":"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1_TRANS":"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2_TRANS":"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3_TRANS":"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}[e]]})})})})),H=n(32),w=n.n(H);var M=function(){return Object(R.jsxs)("div",{className:w.a.filterContainer,children:[Object(R.jsx)("span",{className:w.a.filterTitle,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(R.jsxs)("ul",{className:w.a.filterList,children:[Object(R.jsx)(y,{name:"ALL"}),Object(R.jsx)(y,{name:"0_TRANS"}),Object(R.jsx)(y,{name:"1_TRANS"}),Object(R.jsx)(y,{name:"2_TRANS"}),Object(R.jsx)(y,{name:"3_TRANS"})]})]})},F=n(31),D=n(47),P=n.n(D),G=n(24),J=n.n(G),K=n.p+"static/media/ok.801c8264.png";var q=Object(i.b)((function(t){return{loadComplete:t.tickets.loadComplete}}))((function(t){var e=t.loadComplete,n=Object(c.useState)(!1),a=Object(F.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){e&&(setTimeout((function(){document.getElementById("alert").style.height=0}),3500),setTimeout((function(){return r(!0)}),4e3))}),[e,r]),s?null:e?Object(R.jsxs)("div",{className:J.a.container,id:"alert",children:[Object(R.jsx)("img",{className:J.a.icon,src:K,alt:"icon"}),Object(R.jsx)("div",{className:J.a.text,children:"\u0412\u0441\u0435 \u0431\u0438\u043b\u0435\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b!"})]}):Object(R.jsxs)("div",{className:J.a.container,children:[Object(R.jsx)(P.a,{color:"#2196f3",size:36}),Object(R.jsx)("div",{className:J.a.text,children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0431\u0438\u043b\u0435\u0442\u0430\u043c"})]})})),B=q,U=n(18),V=n.n(U);var z=Object(i.b)((function(t){return{sort:t.sort}}),(function(t){return Object(r.bindActionCreators)({changeSort:A},t)}))((function(t){var e=t.sort,n=t.changeSort;return Object(R.jsxs)("div",{className:V.a.container,children:[Object(R.jsx)("button",{className:"".concat(V.a.item," ").concat("CHEAP"===e?V.a.active:null),onClick:function(){return n("CHEAP")},type:"button",children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439"}),Object(R.jsx)("button",{className:"".concat(V.a.item," ").concat("FAST"===e?V.a.active:null),onClick:function(){return n("FAST")},type:"button",children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}),Object(R.jsx)("button",{className:"".concat(V.a.item," ").concat("OPTIMAL"===e?V.a.active:null),onClick:function(){return n("OPTIMAL")},type:"button",children:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439"})]})})),Q=n(85),W=n(48),X=n.n(W),Y=n(8),Z=n.n(Y),$=n(39);var tt=function(t){var e=t.origin,n=t.destination,c=t.date,a=t.stops,s=t.duration,r=s/60>=24?"".concat(Math.floor(s/1440),"\u0434 ").concat(Math.floor(s/60)%24,"\u0447 ").concat(s%60,"\u043c"):"".concat(Math.floor(s/60),"\u0447 ").concat(s%60,"\u043c"),i=new Date(c),o=Object($.a)(i,"HH:mm"),l=Object($.a)(i.setMinutes(i.getMinutes()+s),"HH:mm"),u="".concat(a.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a");return 1===a.length&&(u="".concat(a.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),2!==a.length&&3!==a.length||(u="".concat(a.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),Object(R.jsxs)("div",{className:Z.a.descriptionRow,children:[Object(R.jsxs)("div",{className:Z.a.descriptionColumn,children:[Object(R.jsxs)("span",{className:Z.a.titleInfo,children:[e," \u2013 ",n]}),Object(R.jsxs)("span",{className:Z.a.info,children:[o," \u2013 ",l]})]}),Object(R.jsxs)("div",{className:Z.a.descriptionColumn,children:[Object(R.jsx)("span",{className:Z.a.titleInfo,children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(R.jsx)("span",{className:Z.a.info,children:r})]}),Object(R.jsxs)("div",{className:Z.a.descriptionColumn,children:[Object(R.jsx)("span",{className:Z.a.titleInfo,children:u}),Object(R.jsx)("span",{className:Z.a.info,children:a.join(", ")})]})]})};var et=function(t){var e=t.price,n=t.carrier,c=t.segments,a="https://pics.avs.io/99/36/".concat(n,".png");return Object(R.jsxs)("li",{className:Z.a.container,tabIndex:"0",children:[Object(R.jsxs)("header",{className:Z.a.header,children:[Object(R.jsxs)("span",{className:Z.a.price,children:[e," P"]}),Object(R.jsx)("img",{src:a,alt:"aircraft logo"})]}),Object(R.jsx)(tt,Object(b.a)({},c[0])),Object(R.jsx)(tt,Object(b.a)({},c[1]))]})},nt=n(27),ct=n.n(nt);var at=Object(i.b)((function(t){return{tickets:t.tickets.items,filter:t.filter,sort:t.sort}}))((function(t){var e=t.tickets,n=t.filter,a=t.sort,s=Object(c.useState)(5),r=Object(F.a)(s,2),i=r[0],o=r[1],l=e.filter((function(t){var e=t.segments[0].stops.length,c=t.segments[1].stops.length;return!!n.ALL||(!(!n["0_TRANS"]||0!==e&&0!==c)||(!(!n["1_TRANS"]||1!==e&&1!==c)||(!(!n["2_TRANS"]||2!==e&&2!==c)||!(!n["3_TRANS"]||3!==e&&3!==c))))}));l.sort((function(t,e){var n=t.segments[0].duration+t.segments[1].duration,c=e.segments[0].duration+e.segments[1].duration,s=t.segments[0].stops.length+t.segments[1].stops.length,r=e.segments[0].stops.length+e.segments[1].stops.length;return"FAST"===a?n-c:"OPTIMAL"===a?s-r:t.price-e.price}));var u=l.slice(0,i).map((function(t){return Object(R.jsx)(et,Object(b.a)({},t),t.id)}));if(!e.length)return Object(R.jsx)("div",{className:ct.a.spinnerContainer,children:Object(R.jsx)(X.a,{color:"#2196f3",size:30})});if(!u.length)return Object(R.jsx)("div",{className:ct.a.alertContainer,children:Object(R.jsx)(Q.a,{message:"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",type:"info",showIcon:!0})});var j=Object(R.jsx)("button",{className:ct.a.buttonMore,onClick:function(){return o((function(t){return t+5}))},type:"button",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"}),d=u.length<l.length&&l.length?j:null;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("ul",{className:ct.a.list,children:u}),d]})})),st=at,rt=n.p+"static/media/Logo.ba7ff9c5.svg",it=n(33),ot=n.n(it);var lt=Object(i.b)((function(t){return{searchID:t.searchID,isLoading:t.tickets.isLoading,loadComplete:t.tickets.loadComplete}}),(function(t){return Object(r.bindActionCreators)({getSearchID:S,getTickets:E},t)}))((function(t){var e=t.searchID,n=t.isLoading,a=t.loadComplete,s=t.getSearchID,r=t.getTickets;return Object(c.useEffect)(s,[s]),!e||n||a||r(e),Object(R.jsxs)("div",{className:ot.a.container,children:[Object(R.jsx)(B,{}),Object(R.jsx)("div",{className:ot.a.logoContainer,children:Object(R.jsx)("img",{src:rt,alt:"logo",className:ot.a.logo})}),Object(R.jsxs)(f.a,{gutter:{xs:0,md:24},children:[Object(R.jsx)(m.a,{xs:{span:24},md:{span:8},children:Object(R.jsx)(M,{})}),Object(R.jsxs)(m.a,{xs:{span:24},md:{span:16},children:[Object(R.jsx)(z,{}),Object(R.jsx)(st,{})]})]})]})})),ut=lt,jt=(n(80),n(81),Object(r.createStore)(h,Object(l.composeWithDevTools)(Object(r.applyMiddleware)(o.a))));s.a.render(Object(R.jsx)(i.a,{store:jt,children:Object(R.jsx)(ut,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.25ad3954.chunk.js.map